{% extends 'base/navbar.html' %}

{% block content %}


<table id="table" class="table table-striped table-primary">
  <tr class="bg-info text-white">
      <th style="text-align:center">Food item</th>
      <th style="text-align:center">Carbs(gm)</th>
      <th style="text-align:center">Protein(gm)</th>
      <th style="text-align:center">Fats(gm)</th>
      <th style="text-align:center">Calories(Kcal)</th>
  </tr>
  {% for food in food_details %}
  <tr>
      <td style="text-align:center">{{food.name_of_food}}</td>
      <td style="text-align:center">{{food.carbs}}</td>
      <td style="text-align:center">{{food.protein}}</td>
      <td style="text-align:center">{{food.fats}}</td>
      <td style="text-align:center">{{food.calorie}}</td>
  </tr>

  {% endfor %}

  <tr class="bg-info text-white">
      <td style="text-align:center" id="name"><b>Total</b></td>
      <td style="text-align:center" id="totalCarbs"><b></b>{{total_carbs}}</td>
      <td style="text-align:center" id="totalProtien"><b></b>{{total_protein}}</td>
      <td style="text-align:center" id="totalFats"><b></b>{{total_fats}}</td>
      <td style="text-align:center" id="totalCalories"><b></b>{{total_calories}}</td>
  </tr>

</table>


<!--Using  Chart.Js for charts -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="chart-container">
<canvas id="myChart" width="400" heigth="400"></canvas>
</div>


//Positioning Chart in center
<style>
    canvas{
    margin: 0 auto;
    }
</style>

<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, 
    {
        type: 'doughnut',  // bar, pie, line
        data: {
            labels: ['Protein', 'Fats', 'Carbs', 'Calories'],       //for name
            datasets: [{
                label: 'Composition Of Nutrients',
                data: ['{{total_protein}}','{{total_fats}}','{{total_carbs}}','{{total_calories}}'], //passing django variable to javascript array
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(154, 12, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: false,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>

{% endblock content %}



